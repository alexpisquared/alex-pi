<Window x:Class="AzureLogParser.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
        xmlns:local="clr-namespace:AzureLogParser"
        Title="Azure Log Parser" Height="540" Width="1920" Background="#333" Loaded="OnLoaded" Icon="/EdgeWebView2.ico"
        WindowStartupLocation="Manual" Left="0" Top="0" WindowState="Maximized" ResizeMode="CanResizeWithGrip"
        AllowsTransparency="True" WindowStyle="None">
  <Grid Margin="8">
    <Grid.Resources>
      <Style x:Key="RightAlignedCellStyle" TargetType="{x:Type DataGridCell}">
        <Setter Property="HorizontalContentAlignment" Value="Right" />
      </Style>
      <Style x:Key="RightAlignStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="TextAlignment" Value="Right"  />
        <Setter Property="Margin" Value="6 0"  />
      </Style>
      <Style TargetType="DataGridColumnHeader" x:Key="dgch">
        <Setter Property="Background" Value="#333" />
        <Setter Property="FontSize"   Value="12" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
      </Style>
      <Style TargetType="Button">
        <Setter Property="Background" Value="#e333" />
        <Setter Property="Foreground" Value="#ccc" />
        <Setter Property="BorderThickness" Value="0" />
      </Style>
      <Style TargetType="DataGrid" >
        <Setter Property="VerticalAlignment"        Value="Top"    />
        <Setter Property="FontSize"                 Value="16"     />
        <Setter Property="GridLinesVisibility"      Value="None"   />
        <Setter Property="AutoGenerateColumns"      Value="False"  />
        <Setter Property="HeadersVisibility"        Value="Column" />
        <Setter Property="Foreground" Value="#eee" />
        <Setter Property="Background"               Value="#000" />
        <Setter Property="RowBackground"            Value="#111" />
        <Setter Property="AlternatingRowBackground" Value="#222" />
        <Setter Property="ColumnHeaderStyle"        Value="{StaticResource dgch}" />
      </Style>
    </Grid.Resources>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="8"/>
      <RowDefinition Height="52"/>
      <RowDefinition Height="8"/>
      <RowDefinition Height="Auto" MinHeight="26"/>
    </Grid.RowDefinitions>
    <Image VerticalAlignment="Center" HorizontalAlignment="Left" Source="/EdgeWebView2.ico" Width="30" Height="30" />
    <DataGrid x:Name="dbg1" Grid.Row="1"  >
      <DataGrid.Columns>
        <DataGridTextColumn Header="Time"         Binding="{Binding DoneAt, StringFormat='{}{0:ddd MM-dd HH:mm}'}" ElementStyle="{StaticResource RightAlignStyle}" Foreground="#0c0" />
        <DataGridTextColumn Header="Event"        Binding="{Binding EventName}"               Foreground="#0af" />
        <DataGridTextColumn Header="Nick"         Binding="{Binding Nickname}" MaxWidth="80"  Foreground="#cc0" />
        <DataGridTextColumn Header="00"           Binding="{Binding Sub[00]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#aaf" />
        <DataGridTextColumn Header="01"           Binding="{Binding Sub[01]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#bbc" />
        <DataGridTextColumn Header="CPU"          Binding="{Binding Sub[02]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#0af" />
        <DataGridTextColumn Header="03"           Binding="{Binding Sub[03]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#bbc" />
        <DataGridTextColumn Header="04"           Binding="{Binding Sub[04]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#aaf" />
        <DataGridTextColumn Header="05"           Binding="{Binding Sub[05]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#bbc" />
        <DataGridTextColumn Header="06"           Binding="{Binding Sub[06]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#aaf" Width="*" />
        <DataGridTextColumn Header="07"           Binding="{Binding Sub[07]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#bbc" />
        <DataGridTextColumn Header="08"           Binding="{Binding Sub[08]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#aaf" />
        <DataGridTextColumn Header="09"           Binding="{Binding Sub[09]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#bbc" />
        <DataGridTextColumn Header="10"           Binding="{Binding Sub[10]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#aaf" />
        <DataGridTextColumn Header="11"           Binding="{Binding Sub[11]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#bbc" />
        <DataGridTextColumn Header="12"           Binding="{Binding Sub[12]}" FontFamily="Arial Narrow" FontSize="18" Foreground="#aaf" />
        <!--
        <DataGridTextColumn Header="Signature"    Binding="{Binding BrowserSignature}" FontFamily="Arial Narrow" FontSize="18" Width="*" Foreground="#aaa" />
        <DataGridTextColumn Header="FirstVisitId" Binding="{Binding FirstVisitId}" />-->
      </DataGrid.Columns>
    </DataGrid>

    <TextBox  Grid.Row="3" x:Name="tbx1" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="12" Background="#222" VerticalScrollBarVisibility="Auto" Foreground="#aaf" />

    <DataGrid Grid.Row="5" x:Name="dbg2" SelectionChanged="OnUserChanged" CellEditEnding="OnEdit" >
      <DataGrid.Columns>
        <DataGridTextColumn Header="CreatedAt  " IsReadOnly="True" Binding="{Binding CreatedAt, StringFormat='{}{0:y-MM-dd}'}" Foreground="#faa" />
        <DataGridTextColumn Header="LastVisit  " IsReadOnly="True" Binding="{Binding LastVisitAt, StringFormat='{}{0:ddd MM-dd HH:mm}'}" ElementStyle="{StaticResource RightAlignStyle}" Foreground="#0c0" />
        <DataGridTextColumn Header="Nickname  "                    Binding="{Binding Nickname}" Foreground="#cc0" />
        <DataGridTextColumn Header="Spread  "    IsReadOnly="True" Binding="{Binding Spread.TotalDays, StringFormat='{}{0:N1}'}" ElementStyle="{StaticResource RightAlignStyle}" />
        <DataGridTextColumn Header="Visits  "    IsReadOnly="True" Binding="{Binding TotalVisits}"  ElementStyle="{StaticResource RightAlignStyle}" />
        <DataGridTextColumn Header="Note  "      IsReadOnly="True" Binding="{Binding Note}" Width="*" Foreground="#888" />
        <DataGridTextColumn Header="*"           IsReadOnly="True" Binding="{Binding MemberSinceKey}" Width="26" />
      </DataGrid.Columns>
    </DataGrid>

    <GridSplitter Grid.Row="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent" />
    <GridSplitter Grid.Row="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent" />

    <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Right" Grid.Row="0" Margin="1">
      <Button Content=" _Create " Click="OnCreate" />
      <Button Content=" _Readit " Click="OnLoaded" IsDefault="True" Foreground="#0c0" />
      <Button Content=" _Update " Click="OnUpdate" />
      <Button Content=" _Delete " Click="OnDelete" Foreground="#f00" />
      <Button Content=" _Append " Click="OnAppend" />
      <Button     IsCancel="True" Click="OnExit"   />
    </StackPanel>
  </Grid>
</Window>